<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Amigo Secreto</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin: 50px; }
        input, button { margin: 10px; padding: 10px; }
        #links { margin-top: 20px; white-space: pre-wrap; }
    </style>
</head>
<body>
    <h1>Admin - Gerar Amigo Secreto ðŸŽ„</h1>
    <p>Insira os nomes dos participantes (um por linha):</p>
    <textarea id="nomes" rows="10" cols="30" placeholder="JoÃ£o&#10;Maria&#10;Pedro&#10;..."></textarea><br>
    <button onclick="gerarSorteio()">Gerar Sorteio e Links</button>
    <div id="links"></div>

    <script>
        function gerarSorteio() {
            const nomesTexto = document.getElementById('nomes').value.trim();
            if (!nomesTexto) {
                alert('Insira pelo menos 2 nomes!');
                return;
            }
            const participantes = nomesTexto.split('\n').map(n => n.trim()).filter(n => n);
            if (participantes.length < 2) {
                alert('Precisa de pelo menos 2 participantes!');
                return;
            }

            // Gera atribuiÃ§Ãµes Ãºnicas (ninguÃ©m tira o prÃ³prio nome)
            let disponiveis = [...participantes];
            let atribuicoes = {};
            for (let nome of participantes) {
                let index;
                do {
                    index = Math.floor(Math.random() * disponiveis.length);
                } while (disponiveis[index] === nome);
                atribuicoes[nome] = disponiveis.splice(index, 1)[0];
            }

            // Gera IDs Ãºnicos e links
            let links = '';
            participantes.forEach((nome) => {
                const uniqueId = crypto.randomUUID(); // ID Ãºnico e aleatÃ³rio
                const data = btoa(JSON.stringify({ attr: atribuicoes[nome] })); // Codifica apenas o nome atribuÃ­do
                links += `${nome}: https://SEU-USUARIO.github.io/amigo-secreto/index.html?id=${uniqueId}&data=${data}\n`; // Substitua pela sua URL
            });

            document.getElementById('links').innerText = 'Copie e envie esses links (um para cada pessoa). NÃƒO compartilhe!\n\n' + links;
        }
    </script>
</body>
</html>